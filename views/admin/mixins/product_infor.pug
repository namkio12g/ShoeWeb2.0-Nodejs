include ./confirm.pug


mixin product_infor(products,listOption,keyword,detailProduct1)
    nav.navbar.navbar_menu-title
        .nameTitle Product List
    .row.searchAndStatus
        .col-md-6
            form
                .row
                    .col-6
                        .form-group.navbar.navbar_search.form_search 
                            lable Tìm kiếm
                            input(type="text" value=keyword name="keyword" class="form-control",id="seach" placeholder="----------Bạn tìm kiếm gì----------" aria-label="Recipient's username" aria-describedby="button-addon2")
                            button(type='submit')
                                i(class="fa-solid fa-magnifying-glass" )
                    .col-md-6
                        .form-group.navbar
                            lable Price range
                            .row.d-flex.flex-row.my-0.py
                                .col-6.ps-0
                                    input.form-control.range-price(type="Number" value=minValue name="minValue" placeholder="Min price" min="0")
                                .col-6
                                    input.form-control.range-price(type="Number"  value=maxValue name="maxValue" placeholder="Max price" min="0")
        .col-md-2
            .form-group.navbar
                lable Trạng Thái
                select.form-select.filterSearchProduct#comboboxChangeStatus(aria-label='Default select example')
                                option(value="") -- status --

                                each item in listOption
                                    if item.class=="active"
                                        option(value=item.value,selected) #{item.name}
                                    else 
                                        option(value=item.value) #{item.name}  


        .col-md-2
            //- button.btn.btn-success.add_Product.btn_addProduct(type='button') Add new product
            button.btn.btn-success.add_Product.btn_addProduct.btn_addNewProduct(type='button')
                a.fs-4(href="/admin/products/add-new-product" style="color:white")  Add new product


    nav.navbar.navbar_content
        +detailProduct(detailProduct1)
        table.table.align-middle.tableProduct
            thead
                tr
                    th(scope='col',style='width: 5%' first)
                        input(type="checkbox" checkbox-all)
                    th(scope='col',style='width: 5%' first) STT
                    th(scope='col',style='width: 20%') Product
                    th(scope='col',style='width: 10%') Brand
                        i(class="fa-solid fa-arrow-up arrow")
                    th(scope='col',style='width: 10%') Price
                    th(cope='col',style='width: 10%') Trạng Thái 
                    th(scope='col') Detail
                    th(scope='col') Hoạt Động

            tbody.table-group-divider
            +confirm("Bạn Có Muốn Xóa Không")
            each item,index in products
                +product_infor_item(item,index)

mixin product_infor_item(item,index) 
    tr.text-start.row-product
                    th(scope='row' first)
                        input(type="checkbox" id_product =item._id checkbox-item)    
                    td(class="stt_tableProduct",scope='row' first) #{index+1}
                    td(class="_tableProduct")
                        .row
                            .col-3
                                img(class='avatar-products' src=`${item.thumbnail}`, alt="", srcset="")
                            .col-7
                                div.d-flex.flex-column.name-id-products
                                    p1 #{item.title}
                                    p1 SP00001
                        //- img(src=`${item.thumbnail}`, alt="", srcset="")
                    td(class="_tableProduct") #{item.brand}
                    td(class="_tableProduct") #{item.price}

                    td(class="text-wrap") 
                        button.btnStatusProduct(status =item.status, id_product =item._id status-button style=`${item.status==="active"? "color:var(--bs-success)":"color:var(--bs-danger)"}`)
                            span:  i(class="fa-solid fa-circle")
                            span 
                                | #{item.status}
                    td
                            i.fa-solid.fa-eye(btn-data-detail, id_product =item._id)
 
                    td
                        //- button.btn.btn-warning(href="/" type='button' data-toggle="modal" data-target="#exampleModal" )
                        a.btn.btn-warning.fs-5(href=`/admin/products/edit/${item._id}`)  Edit
                        if item.delete == "false"
                            button.btn.fs-5.btn-danger.ml-1.openConfirm(type='button' btn_delete id_product=item._id) Delete
